/* SPDX-License-Identifier: Apache-2.0 */
/* Copyright (c) 2025 Lulu (GitHub: lulu-sk, https://github.com/lulu-sk) */
/* xterm styles - 必须放在所有 Tailwind 指令之前 */
@import "@xterm/xterm/css/xterm.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 终端容器需撑满可用空间，否则滚动条会在视觉上“悬空” */
.xterm {
  height: 100%;
  width: 100%;
}

html, body, #root { height: 100%; }
:root {
  /* 亮色主题：现代精致风格 */
  /* 灰度层次 - 更柔和、更透明 */
  --cf-app-bg: #f5f5f7;           /* 主背景 - 浅灰色 */
  --cf-surface: rgba(255, 255, 255, 0.8);  /* 卡片、对话框 - 半透明白色 */
  --cf-surface-solid: #ffffff;    /* 实心表面 */
  --cf-surface-muted: #f9f9fb;    /* 更深的区域 */
  --cf-surface-hover: rgba(0, 0, 0, 0.04);  /* 悬停状态 */
  --cf-border: rgba(0, 0, 0, 0.08);         /* 边框 - 半透明 */
  --cf-border-strong: rgba(0, 0, 0, 0.15);  /* 强边框 */
  /* 标签页描边与质感 */
  --cf-tab-border: rgba(15, 23, 42, 0.16);
  --cf-tab-border-strong: rgba(15, 23, 42, 0.28);
  --cf-tab-pill-active-top: rgba(255, 255, 255, 0.98);
  --cf-tab-pill-active-bottom: rgba(255, 255, 255, 0.82);
  --cf-tab-pill-hover: rgba(255, 255, 255, 0.7);
  --cf-tab-pill-muted: rgba(255, 255, 255, 0.55);
  --cf-text-primary: #1d1d1f;     /* 主文本 - 接近黑色 */
  --cf-text-secondary: #6e6e73;   /* 次要文本 - 中灰 */
  --cf-text-muted: #86868b;       /* 弱化文本 - 浅灰 */
  
  /* 现代蓝色强调系统 */
  --cf-accent: #007aff;           /* 主强调色 */
  --cf-accent-hover: #0051d5;     /* 悬停时更深 */
  --cf-accent-light: rgba(0, 122, 255, 0.1);  /* 淡蓝色背景 */
  
  /* 语义色彩系统 */
  --cf-red: #ff3b30;              /* 错误、删除、危险 */
  --cf-red-hover: #d70015;        /* 悬停 */
  --cf-red-light: rgba(255, 59, 48, 0.1);
  --cf-green: #34c759;            /* 成功、确认 */
  --cf-green-hover: #248a3d;      /* 悬停 */
  --cf-green-light: rgba(52, 199, 89, 0.1);
  --cf-yellow: #ffcc00;           /* 警告、提示 */
  --cf-yellow-hover: #c89e00;     /* 悬停 */
  --cf-yellow-light: rgba(255, 204, 0, 0.1);
  --cf-warning-foreground: #1d1d1f; /* 警告前景：保持充足对比 */
  --cf-orange: #ff9500;           /* 橙色 */
  --cf-orange-hover: #c77700;
  --cf-orange-light: rgba(255, 149, 0, 0.1);
  --cf-teal: #5ac8fa;             /* 信息、链接 */
  --cf-teal-hover: #0a84ff;
  --cf-teal-light: rgba(90, 200, 250, 0.1);
  --cf-purple: #af52de;           /* 特殊标记 */
  --cf-purple-hover: #8e44ad;
  --cf-purple-light: rgba(175, 82, 222, 0.1);
  
  /* 滚动条 - 更精致 */
  --cf-scrollbar-thumb: rgba(0, 0, 0, 0.2);
  --cf-scrollbar-thumb-hover: rgba(0, 0, 0, 0.3);
  --cf-scrollbar-track: transparent;
}

.dark {
  /* 暗色主题：现代精致风格 */
  /* 灰度层次 - 更深邃、更优雅 */
  --cf-app-bg: #1c1c1e;           /* 主背景 - 深灰色 */
  --cf-surface: rgba(44, 44, 46, 0.85);  /* 卡片、对话框 - 半透明 */
  --cf-surface-solid: #2c2c2e;    /* 实心表面 */
  --cf-surface-muted: #1c1c1e;    /* 更深的区域 */
  --cf-surface-hover: rgba(255, 255, 255, 0.08);  /* 悬停状态 */
  --cf-border: rgba(255, 255, 255, 0.1);          /* 边框 - 半透明 */
  --cf-border-strong: rgba(255, 255, 255, 0.18);  /* 强边框 */
  /* 标签页描边与质感 */
  --cf-tab-border: rgba(255, 255, 255, 0.26);
  --cf-tab-border-strong: rgba(255, 255, 255, 0.42);
  --cf-tab-pill-active-top: rgba(255, 255, 255, 0.16);
  --cf-tab-pill-active-bottom: rgba(255, 255, 255, 0.06);
  --cf-tab-pill-hover: rgba(255, 255, 255, 0.1);
  --cf-tab-pill-muted: rgba(255, 255, 255, 0.05);
  --cf-text-primary: #f5f5f7;     /* 主文本 - 接近白色 */
  --cf-text-secondary: #98989d;   /* 次要文本 - 中灰 */
  --cf-text-muted: #636366;       /* 弱化文本 - 深灰 */
  
  /* 现代蓝色强调系统 */
  --cf-accent: #0a84ff;           /* 主强调色（暗色版） */
  --cf-accent-hover: #409cff;     /* 悬停时更亮 */
  --cf-accent-light: rgba(10, 132, 255, 0.15);  /* 淡蓝色背景 */
  
  /* 语义色彩系统（暗色版） */
  --cf-red: #ff453a;              /* 错误、删除、危险 */
  --cf-red-hover: #ff6961;        /* 悬停 */
  --cf-red-light: rgba(255, 69, 58, 0.15);
  --cf-green: #32d74b;            /* 成功、确认 */
  --cf-green-hover: #64de75;      /* 悬停 */
  --cf-green-light: rgba(50, 215, 75, 0.15);
  --cf-yellow: #ffd60a;           /* 警告、提示 */
  --cf-yellow-hover: #ffed4e;     /* 悬停 */
  --cf-yellow-light: rgba(255, 214, 10, 0.15);
  --cf-warning-foreground: #1d1d1f; /* 警告前景：暗色下仍使用深色文字以确保对比 */
  --cf-orange: #ff9f0a;           /* 橙色 */
  --cf-orange-hover: #ffb340;
  --cf-orange-light: rgba(255, 159, 10, 0.15);
  --cf-teal: #64d2ff;             /* 信息、链接 */
  --cf-teal-hover: #8ce0ff;
  --cf-teal-light: rgba(100, 210, 255, 0.15);
  --cf-purple: #bf5af2;           /* 特殊标记 */
  --cf-purple-hover: #da8fff;
  --cf-purple-light: rgba(191, 90, 242, 0.15);
  
  /* 滚动条 - 更精致 */
  --cf-scrollbar-thumb: rgba(255, 255, 255, 0.15);
  --cf-scrollbar-thumb-hover: rgba(255, 255, 255, 0.25);
  --cf-scrollbar-track: transparent;
}

.dark .text-slate-900,
.dark .text-slate-800,
.dark .text-slate-700 {
  color: var(--cf-text-primary);
}

.dark .text-slate-600,
.dark .text-slate-500,
.dark .text-slate-400 {
  color: var(--cf-text-secondary);
}

.dark .bg-white {
  background-color: var(--cf-surface);
}

.dark .bg-slate-50,
.dark .bg-slate-100 {
  background-color: var(--cf-surface-muted);
}

.dark .border-slate-200,
.dark .border-slate-100 {
  border-color: var(--cf-border);
}

body {
  background-color: var(--cf-app-bg);
  color: var(--cf-text-primary);
  overflow: hidden;
  transition: background-color 0.3s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* 文本选区样式 */
::selection {
  background-color: var(--cf-accent-light);
  color: var(--cf-text-primary);
}
.dark ::selection {
  background-color: var(--cf-accent-light);
  color: var(--cf-text-primary);
}

/* 全局滚动条样式（更纤细、更柔和） */
* {
  scrollbar-width: thin; /* Firefox */
  scrollbar-color: var(--cf-scrollbar-thumb) var(--cf-scrollbar-track);
}
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
*::-webkit-scrollbar-thumb {
  background-color: var(--cf-scrollbar-thumb);
  border-radius: 9999px;
  border: 2px solid transparent; /* 留出一点内边距视觉 */
  background-clip: padding-box;
}
*::-webkit-scrollbar-thumb:hover {
  background-color: var(--cf-scrollbar-thumb-hover);
}
*::-webkit-scrollbar-track {
  background: var(--cf-scrollbar-track);
}

/* 隐藏滚动条但保留滚动能力（用于水平标签栏等） */
.no-scrollbar {
  -ms-overflow-style: none; /* IE/Edge */
  scrollbar-width: none; /* Firefox */
}
.no-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome/Safari */
}

/* 通用 ScrollArea 滚动条：更接近 macOS Overlay 的轻量样式 */
.cf-scroll-area {
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}
.cf-scroll-area:hover {
  scrollbar-color: var(--cf-scrollbar-thumb) transparent;
}
.cf-scroll-area::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
.cf-scroll-area::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 9999px;
  border: 1px solid transparent;
  background-clip: padding-box;
  transition: background-color 0.2s ease;
}
.cf-scroll-area:hover::-webkit-scrollbar-thumb {
  background-color: var(--cf-scrollbar-thumb);
}
.cf-scroll-area:hover::-webkit-scrollbar-thumb:hover {
  background-color: var(--cf-scrollbar-thumb-hover);
}
.cf-scroll-area::-webkit-scrollbar-track {
  background: transparent;
}

/* 历史面板滚动条进一步压缩宽度，减少内容被挤压 */
.history-scroll-area {
  scrollbar-width: thin;
}
.history-scroll-area::-webkit-scrollbar {
  width: 2px;
  height: 2px;
}
.history-scroll-area::-webkit-scrollbar-thumb {
  border: 1px solid transparent;
  border-radius: 9999px;
}
.history-scroll-area::-webkit-scrollbar-track {
  background: transparent;
  margin: 0;
}

/* 终端滚动条 - 参考 macOS Overlay 效果：默认透明，滚动/悬停时才亮起 */
.cf-terminal-chrome {
  position: relative;
  --cf-terminal-scrollbar-size: 8px;
  --cf-terminal-scrollbar-thumb: var(--cf-scrollbar-thumb);
  --cf-terminal-scrollbar-thumb-hover: var(--cf-scrollbar-thumb-hover);
  --cf-terminal-scrollbar-track: transparent;
  --cf-terminal-scrollbar-border: rgba(255, 255, 255, 0.4);
  --cf-terminal-scrollbar-glow: rgba(15, 23, 42, 0.28);
}
.cf-terminal-chrome .xterm-viewport {
  background-color: var(--cf-terminal-bg, transparent) !important;
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
  overscroll-behavior: contain;
}
.cf-terminal-chrome[data-scroll-active="1"] .xterm-viewport,
.cf-terminal-chrome:hover .xterm-viewport {
  scrollbar-color: var(--cf-terminal-scrollbar-thumb) transparent;
}
.cf-terminal-chrome .xterm-viewport::-webkit-scrollbar {
  width: var(--cf-terminal-scrollbar-size);
  background: transparent;
}
.cf-terminal-chrome .xterm-viewport::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 9999px;
  border: 2px solid transparent;
  box-shadow: inset 0 0 0 1px transparent;
  transition: background-color 0.35s ease, box-shadow 0.35s ease, border-color 0.35s ease;
}
.cf-terminal-chrome[data-scroll-active="1"] .xterm-viewport::-webkit-scrollbar-thumb,
.cf-terminal-chrome:hover .xterm-viewport::-webkit-scrollbar-thumb {
  background-color: var(--cf-terminal-scrollbar-thumb);
  border-color: var(--cf-terminal-scrollbar-border);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.35),
    inset 0 -1px 0 rgba(0, 0, 0, 0.45),
    0 5px 14px var(--cf-terminal-scrollbar-glow);
}
.cf-terminal-chrome[data-scroll-active="1"] .xterm-viewport::-webkit-scrollbar-thumb:hover,
.cf-terminal-chrome:hover .xterm-viewport::-webkit-scrollbar-thumb:hover {
  background-color: var(--cf-terminal-scrollbar-thumb-hover);
  border-color: var(--cf-terminal-scrollbar-border);
  border-color: color-mix(in srgb, var(--cf-terminal-scrollbar-border) 68%, transparent);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.45),
    inset 0 -1px 0 rgba(0, 0, 0, 0.45),
    0 7px 18px var(--cf-terminal-scrollbar-glow);
}
.cf-terminal-chrome .xterm-viewport::-webkit-scrollbar-track {
  background: transparent;
}

/* 全屏输入遮罩与面板动画：确保开合更顺滑、有连贯的空间感 */
@keyframes cfFullscreenOverlayEnter {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes cfFullscreenOverlayExit {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }
}

@keyframes cfFullscreenPanelEnter {
  from {
    opacity: 0;
    transform: translateY(24px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes cfFullscreenPanelExit {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(18px) scale(0.97);
  }
}

/* 数字输入框：移除内置微调按钮，避免右侧留白过大 */
.cf-number-input::-webkit-outer-spin-button,
.cf-number-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.cf-number-input {
  appearance: textfield;
  -moz-appearance: textfield;
}
